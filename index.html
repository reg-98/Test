<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>M&F Roofing Calculator</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
  h1 { text-align: center; }
  label { display: block; margin-top: 10px; font-weight: bold; }
  input, select { width: 100%; padding: 8px; margin-top: 5px; }
  button { width: 100%; padding: 12px; margin-top: 15px; background: #333; color: #fff; border: none; }
  table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
  th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
  th { background: #eee; }
</style>
</head>
<body>

<h1>M&F Roofing Calculator</h1>

<label>Roof Length (eaves run, m)</label>
<input type="number" id="length" value="7.5">

<label>Roof Width (ridge to eaves, m)</label>
<input type="number" id="width" value="6.3">

<label>Duo-pitch? (two slopes)</label>
<select id="twoSlopes">
  <option value="yes" selected>Yes</option>
  <option value="no">No</option>
</select>

<label>Batten Gauge (mm)</label>
<input type="number" id="gauge" value="337">

<label>Number of Verges (gable ends)</label>
<input type="number" id="verges" value="2">

<label>Stock Batten Length (m)</label>
<select id="battenLength">
  <option value="3.0">3.0</option>
  <option value="3.6">3.6</option>
  <option value="4.2">4.2</option>
  <option value="4.8" selected>4.8</option>
</select>

<label>Tile Waste (%)</label>
<input type="number" id="waste" value="7">

<button id="calcBtn" type="button">Calculate</button>

<table id="results">
  <thead>
    <tr><th>Material</th><th>Qty</th><th>Packs</th></tr>
  </thead>
  <tbody></tbody>
</table>

<script>
function roundUpHalf(num){ return Math.ceil(num*2)/2; }

function calculate() {
  const L = parseFloat(document.getElementById('length').value) || 0;     // eaves run (m)
  const W = parseFloat(document.getElementById('width').value) || 0;      // ridge-to-eaves slope (m)
  const two = document.getElementById('twoSlopes').value === 'yes';
  const gaugeM = (parseFloat(document.getElementById('gauge').value) || 0) / 1000; // mm -> m
  const verges = Math.max(0, Math.round(parseFloat(document.getElementById('verges').value) || 0));
  const battenLen = parseFloat(document.getElementById('battenLength').value) || 4.8;
  const wastePct = (parseFloat(document.getElementById('waste').value) || 0) / 100;

  // Areas & runs
  const roofArea = L * W * (two ? 2 : 1);
  const eavesTotal = L * (two ? 2 : 1);   // both eaves if duo-pitch
  const ridgeLen = L;

  // Courses (rows of battens)
  const courses = gaugeM > 0 ? Math.ceil(W / gaugeM) : 0;

  // Tiles – Russell Grampian (use 10.6 tiles/m² at 100 mm headlap)
  const tilesPerM2 = 10.6;
  const tiles = Math.ceil(roofArea * tilesPerM2 * (1 + wastePct));
  const tilePacks = roundUpHalf(tiles / 192); // 192/pack, round up to 0.5

  // Battens – total metreage, then sticks & packs
  const battensPerM2 = gaugeM > 0 ? (1.0 / gaugeM) : 0; // m per m²
  const battenMetres = Math.ceil(roofArea * battensPerM2 * (1 + wastePct));
  const battenSticks = Math.ceil(battenMetres / battenLen);
  const battenPacks = roundUpHalf(battenSticks / 10);   // 10 sticks/pack

  // Rafter roll – both eaves on duo-pitch
  const rafterRoll = Math.ceil(L * (two ? 2 : 1));

  // Eaves trays – allow 6" (0.1524 m) overlap per joint; assume 1.5 m tray pieces
  const trayLen = 1.5, trayLap = 0.1524;
  const effectivePerPiece = Math.max(0, trayLen - trayLap);
  const trayPieces = effectivePerPiece > 0 ? Math.ceil(eavesTotal / effectivePerPiece) : 0;
  const eavesTrayTotalLen = Math.ceil(trayPieces * trayLen);

  // Dry verge units – 1 per course per verge
  const dryVergeUnits = courses * verges; // add spare on order if you prefer

  // Build table
  const rows = [
    ["Tiles – Russell Grampian", `${tiles} pcs`, `${tilePacks} packs (192/pack)`],
    ["Battens 25×50 – total", `${battenMetres} m`, "—"],
    [`Battens 25×50 (${battenLen.toFixed(1)} m sticks)`, `${battenSticks} sticks`, `${battenPacks} packs (10/stk pack)`],
    ["Dry Verge – large format", `${dryVergeUnits} units`, "—"],
    ["Rafter Roll", `${rafterRoll} m`, "—"],
    ["Eaves Trays – pieces", `${trayPieces} pcs`, "—"],
    ["Eaves Trays – total length", `${eavesTrayTotalLen} m`, "—"],
    ["Underlay area (for VP300)", `${Math.ceil(roofArea * 1.05)} m²`, "≈ rolls = m² / 50"]
  ];

  const tbody = document.querySelector('#results tbody');
  tbody.innerHTML = rows.map(r => `<tr><td>${r[0]}</td><td>${r[1]}</td><td>${r[2]}</td></tr>`).join("");
}

document.getElementById('calcBtn').addEventListener('click', calculate);
document.addEventListener('DOMContentLoaded', calculate);
</script>

</body>
</html>