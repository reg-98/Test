<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>M&F Roofing – Simple Calculator</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif; margin: 0; padding: 16px; background: #f6f7f8; }
  h1 { font-size: 20px; text-align:center; margin-bottom: 16px; }
  .card { background:#fff; border:1px solid #ccc; border-radius: 10px; padding: 14px; margin-bottom: 14px; }
  label { display:block; font-weight:600; margin-top: 8px; }
  input, select, button { width: 100%; font-size: 16px; padding: 10px; margin-top: 4px; border:1px solid #ccc; border-radius: 8px; }
  button { background:#007aff; color:#fff; font-weight:600; cursor:pointer; margin-top: 16px; }
  table { width: 100%; border-collapse: collapse; margin-top: 14px; }
  th, td { border: 1px solid #ccc; padding: 8px; font-size: 15px; text-align:center; }
  th { background: #f0f0f0; }
</style>
</head>
<body>
<h1>M&F Roofing Ltd – Materials Calculator</h1>

<div class="card">
  <label>Eaves Length (m)</label>
  <input id="length" type="number" step="0.1" value="10">

  <label>Ridge-to-Fascia (Slope) Length (m)</label>
  <input id="width" type="number" step="0.1" value="5">

  <label>Batten Gauge (inches)</label>
  <input id="gaugeIn" type="number" step="0.1" value="13.25">

  <label>Tile Waste (%)</label>
  <input id="tileWaste" type="number" step="1" value="7">

  <label>Number of Verges</label>
  <input id="verges" type="number" step="1" value="2">

  <label>Fixing Spec</label>
  <select id="fixSpec">
    <option value="nail">Nail only (1 per tile)</option>
    <option value="perimeter">Nail + clips on perimeter</option>
    <option value="all">Nail + clip every tile</option>
  </select>

  <label>Tile Cover Width (m)</label>
  <input id="tileWidth" type="number" step="0.005" value="0.30">

  <label>Two Slopes (duo-pitch)</label>
  <select id="twoSlopes">
    <option value="yes" selected>Yes</option>
    <option value="no">No</option>
  </select>

  <label>Hip Length (m)</label>
  <input id="hip" type="number" step="0.1" value="0">

  <label>Valley Length (m)</label>
  <input id="valley" type="number" step="0.1" value="0">

  <label>Eaves Tray Piece Length (m)</label>
  <input id="trayLen" type="number" step="0.1" value="1.5">

  <label>Eaves Tray Overlap (m)</label>
  <input id="trayLap" type="number" step="0.01" value="0.1524">

  <button id="calcBtn" type="button">Calculate</button>
</div>

<div class="card">
  <table>
    <thead>
      <tr><th>Material</th><th>Quantity</th></tr>
    </thead>
    <tbody id="results"></tbody>
  </table>
</div>

<script>
function n(id){ return parseFloat(document.getElementById(id).value)||0; }
function v(id){ return document.getElementById(id).value; }

function calc(){
  const L = n('length');
  const W = n('width');
  const two = v('twoSlopes')==='yes';
  const gaugeIn = n('gaugeIn');
  const verges = Math.round(n('verges'));
  const hip = n('hip');
  const valley = n('valley');
  const tileWaste = n('tileWaste');
  const tileWidth = n('tileWidth');
  const fixSpec = v('fixSpec');
  const trayLen = n('trayLen');
  const trayLap = n('trayLap');

  const area = L * W * (two ? 2 : 1);
  const eavesTotal = L * (two ? 2 : 1);
  const ridge = L;
  const gaugeM = gaugeIn * 0.0254;
  const courses = gaugeM>0 ? Math.ceil(W / gaugeM) : 0;
  const tilesPerCourse = tileWidth>0 ? Math.ceil(L / tileWidth) : 0;

  const tilesPerM2 = 10.6;
  const tiles = Math.ceil(area * tilesPerM2 * (1 + tileWaste/100));
  let nails = Math.ceil(tiles * 1.05);
  let clips = 0;
  if(fixSpec === 'perimeter'){
    const vergeEdgeTiles = courses * 2;
    const eavesEdgeTiles = tilesPerCourse * (two ? 2 : 1);
    clips = Math.ceil((vergeEdgeTiles + eavesEdgeTiles) * 1.05);
  } else if(fixSpec === 'all'){
    clips = Math.ceil(tiles * 1.05);
  }
  const battensPerM2 = gaugeM>0 ? (1.0/gaugeM) : 0;
  const battens = Math.ceil(area * battensPerM2 * 1.05);
  const underlay = Math.ceil(area * 1.05);
  const vp300Rolls = Math.ceil(underlay / 50.0);
  const dryVergeUnits = Math.ceil(courses * verges * 1.05);
  const ridgeKits = Math.ceil(ridge / 5.0);
  const ridgeCaps = Math.ceil((ridge + hip) * 3.0);
  const ridgeEnds = verges>0 ? 2 : 0;
  const overFascia = Math.ceil(eavesTotal);
  const effectivePerPiece = Math.max(0, trayLen - trayLap);
  const trayPieces = effectivePerPiece>0 ? Math.ceil(eavesTotal / effectivePerPiece) : 0;
  const trayTotalLen = Math.ceil(trayPieces * trayLen);
  const rafterRoll = Math.ceil(L);
  const grpValley = Math.ceil(valley);

  const rows = [
    ["Tiles – Russell Grampian (pcs)", tiles],
    ["Tile nails (pcs)", nails],
    ["Tile clips (pcs)", clips],
    ["Battens 25×50 (m length)", battens],
    ["Underlay area (m²)", underlay],
    ["Underlay rolls – Protect VP300 (rolls)", vp300Rolls],
    ["Dry Verge – large format (pcs)", dryVergeUnits],
    ["Ridge kits – RussFast 5 m (kits)", ridgeKits],
    ["Ridge caps (pcs)", ridgeCaps],
    ["Ridge cap ends (pcs)", ridgeEnds],
    ["Over Fascia Vents (m)", overFascia],
    ["Eaves Trays – pieces (pcs)", trayPieces],
    ["Eaves Trays – total length (m)", trayTotalLen],
    ["Rafter Roll (m)", rafterRoll],
    ["GRP Valley Troughs (m)", grpValley]
  ];

  const tbody=document.getElementById('results');
  tbody.innerHTML="";
  rows.forEach(([name, qty])=>{
    const tr=document.createElement('tr');
    tr.innerHTML = `<td>${name}</td><td>${qty}</td>`;
    tbody.appendChild(tr);
  });
}

document.addEventListener('DOMContentLoaded', function(){
  document.getElementById('calcBtn').addEventListener('click', calc);
  calc();
});
</script>
</body>
</html>